groups:
  - id: metric.http
    prefix: http
    brief: 'This document defines semantic conventions for HTTP client and server Metrics.'
    note: >
      These conventions can be used for http and https schemes
      and various HTTP versions like 1.1, 2 and SPDY.
    labels:
      - id: method
        type: string
        example: 'GET'
        brief: 'The HTTP request method'
      - id: host
        type: string
        example: 'www.example.com'
        brief: 'The value of the HTTP host header. When the header is empty or not present, this label should be the same.'
      - id: scheme
        type: string
        example: 'https'
        brief: 'The URI scheme identifying the used protocol in lowercase'
      - id: status_code
        type: string
        example: '200'
        brief: 'HTTP response status code'
      - id: flavor
        type: string
        example: [ '1.0', '1.1', '2', 'SPDY', 'QUIC' ]
        brief: 'Kind of HTTP protocol used'
    parameterizedLabels: # To avoid high cardinality the following labels SHOULD substitute any parameters when added as labels to http metric events
      - id: url
        type: string
        example: "api/users/{user_id}"
        brief: 'The originally requested URL'
      - id: target
        type: string
        example: "/path/{id}?q={}"
        brief: 'The full request target as passed in a HTTP request line or equivalent'

  - id: metric.http.client
    prefix: http
    extends: http
    brief: 'HTTP client metric instruments'
    note:
    labels:
      - id: net.peer.name
        type: string
        example: 'example.com'
        brief: 'Remote hostname or similar'
      - id: net.peer.port
        type: number
        example: 443
        brief: 'Remote port number'
      - id: net.peer.ip
        type: string
        example: '127.0.0.1'
        brief: 'Remote address of the peer (dotted decimal for IPv4 or RFC5952 for IPv6)'

  - id: http.client.duration
    prefix: http
    extends: http.client
    instrument: ValueRecorder
    units: milliseconds
    brief: 'measure the duration of the outbound HTTP request'

  - id: http.server
    prefix: http
    extends: http
    brief: 'HTTP server metric instruments'
    note:
    labels:
      - id: server_name
        type: string
        example: 'localhost'
        brief: 'The primary server name of the matched virtual host'
        note: >
          This should be obtained via configuration. If no such configuration can be obtained,
          this label MUST NOT be set ( net.host.name should be used instead).
      - id: net.host.name
        type: string
        example: 'localhost'
        brief: 'Local hostname or similar'
      - id: net.host.port
        type: number
        example: 35555
        brief: 'Like `net.peer.port` but for the host port'

  - id: http.server.duration
    prefix: http
    extends: http.server
    instrument: ValueRecorder
    units: milliseconds
    brief: 'measures the duration of the inbound HTTP request'